require 'json'
# ==> true
# require 'open-uri'
require 'ap'
# ==> true
require 'httpclient'
# ==> true

request = HTTPClient.new
# ==> #<HTTPClient:0x00000004479718 @proxy=nil, @no_proxy=nil, @no_proxy_regexps=[], @base_url=nil, @default_header={}, @www_auth=#<HTTPClient::WWWAuth:0x00000004479650 @basic_auth=#<HTTPClient::BasicAuth:0x00000004479628 @_mutex=#<Mutex:0x000000044795b0>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil, digest_auth#<HTTPClient::DigestAuth:0x00000004479538 @_mutex=#<Mutex:0x000000044794c0>, scheme"Digest", challenge{}, auth{}, nonce_count0, negotiate_auth#<HTTPClient::NegotiateAuth:0x00000004479448 @_mutex=#<Mutex:0x000000044793d0>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, ntlm_auth#<HTTPClient::NegotiateAuth:0x00000004479308 @_mutex=#<Mutex:0x000000044792b8>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, sspi_negotiate_auth#<HTTPClient::SSPINegotiateAuth:0x00000004479218 @_mutex=#<Mutex:0x000000044791a0>, scheme"Negotiate", challenge{}, oauth#<HTTPClient::OAuth:0x00000004479150 @_mutex=#<Mutex:0x000000044790d8>, scheme"OAuth", challenge{}, confignil, auth{}, nonce_count0, signature_handler{"HMAC-SHA1"=>#<Method: HTTPClient::OAuth#sign_hmac_sha1}, @authenticator=[#<HTTPClient::OAuth:0x00000004479150 @_mutex=#<Mutex:0x000000044790d8>, scheme"OAuth", challenge{}, confignil, auth{}, nonce_count0, signature_handler{"HMAC-SHA1"=>#<Method: HTTPClient::OAuth#sign_hmac_sha1}, #<HTTPClient::NegotiateAuth:0x00000004479448 @_mutex=#<Mutex:0x000000044793d0>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::NegotiateAuth:0x00000004479308 @_mutex=#<Mutex:0x000000044792b8>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::SSPINegotiateAuth:0x00000004479218 @_mutex=#<Mutex:0x000000044791a0>, scheme"Negotiate", challenge{}, #<HTTPClient::DigestAuth:0x00000004479538 @_mutex=#<Mutex:0x000000044794c0>, scheme"Digest", challenge{}, auth{}, nonce_count0, #<HTTPClient::BasicAuth:0x00000004479628 @_mutex=#<Mutex:0x000000044795b0>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil], proxy_auth#<HTTPClient::ProxyAuth:0x00000004478fe8 @basic_auth=#<HTTPClient::ProxyBasicAuth:0x00000004478fc0 @_mutex=#<Mutex:0x00000004478f48>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil, negotiate_auth#<HTTPClient::NegotiateAuth:0x00000004478ed0 @_mutex=#<Mutex:0x00000004478e58>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, ntlm_auth#<HTTPClient::NegotiateAuth:0x00000004478d90 @_mutex=#<Mutex:0x00000004478d40>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, sspi_negotiate_auth#<HTTPClient::SSPINegotiateAuth:0x00000004478ca0 @_mutex=#<Mutex:0x00000004478c28>, scheme"Negotiate", challenge{}, digest_auth#<HTTPClient::ProxyDigestAuth:0x00000004478bd8 @_mutex=#<Mutex:0x00000004478b60>, scheme"Digest", challengenil, auth{}, nonce_count0, authenticator[#<HTTPClient::NegotiateAuth:0x00000004478ed0 @_mutex=#<Mutex:0x00000004478e58>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::NegotiateAuth:0x00000004478d90 @_mutex=#<Mutex:0x00000004478d40>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::SSPINegotiateAuth:0x00000004478ca0 @_mutex=#<Mutex:0x00000004478c28>, scheme"Negotiate", challenge{}, #<HTTPClient::ProxyDigestAuth:0x00000004478bd8 @_mutex=#<Mutex:0x00000004478b60>, scheme"Digest", challengenil, auth{}, nonce_count0, #<HTTPClient::ProxyBasicAuth:0x00000004478fc0 @_mutex=#<Mutex:0x00000004478f48>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil], request_filter[#<HTTPClient::ProxyAuth:0x00000004478fe8 @basic_auth=#<HTTPClient::ProxyBasicAuth:0x00000004478fc0 @_mutex=#<Mutex:0x00000004478f48>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil, negotiate_auth#<HTTPClient::NegotiateAuth:0x00000004478ed0 @_mutex=#<Mutex:0x00000004478e58>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, ntlm_auth#<HTTPClient::NegotiateAuth:0x00000004478d90 @_mutex=#<Mutex:0x00000004478d40>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, sspi_negotiate_auth#<HTTPClient::SSPINegotiateAuth:0x00000004478ca0 @_mutex=#<Mutex:0x00000004478c28>, scheme"Negotiate", challenge{}, digest_auth#<HTTPClient::ProxyDigestAuth:0x00000004478bd8 @_mutex=#<Mutex:0x00000004478b60>, scheme"Digest", challengenil, auth{}, nonce_count0, authenticator[#<HTTPClient::NegotiateAuth:0x00000004478ed0 @_mutex=#<Mutex:0x00000004478e58>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::NegotiateAuth:0x00000004478d90 @_mutex=#<Mutex:0x00000004478d40>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::SSPINegotiateAuth:0x00000004478ca0 @_mutex=#<Mutex:0x00000004478c28>, scheme"Negotiate", challenge{}, #<HTTPClient::ProxyDigestAuth:0x00000004478bd8 @_mutex=#<Mutex:0x00000004478b60>, scheme"Digest", challengenil, auth{}, nonce_count0, #<HTTPClient::ProxyBasicAuth:0x00000004478fc0 @_mutex=#<Mutex:0x00000004478f48>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil], #<HTTPClient::WWWAuth:0x00000004479650 @basic_auth=#<HTTPClient::BasicAuth:0x00000004479628 @_mutex=#<Mutex:0x000000044795b0>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil, digest_auth#<HTTPClient::DigestAuth:0x00000004479538 @_mutex=#<Mutex:0x000000044794c0>, scheme"Digest", challenge{}, auth{}, nonce_count0, negotiate_auth#<HTTPClient::NegotiateAuth:0x00000004479448 @_mutex=#<Mutex:0x000000044793d0>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, ntlm_auth#<HTTPClient::NegotiateAuth:0x00000004479308 @_mutex=#<Mutex:0x000000044792b8>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, sspi_negotiate_auth#<HTTPClient::SSPINegotiateAuth:0x00000004479218 @_mutex=#<Mutex:0x000000044791a0>, scheme"Negotiate", challenge{}, oauth#<HTTPClient::OAuth:0x00000004479150 @_mutex=#<Mutex:0x000000044790d8>, scheme"OAuth", challenge{}, confignil, auth{}, nonce_count0, signature_handler{"HMAC-SHA1"=>#<Method: HTTPClient::OAuth#sign_hmac_sha1}, @authenticator=[#<HTTPClient::OAuth:0x00000004479150 @_mutex=#<Mutex:0x000000044790d8>, scheme"OAuth", challenge{}, confignil, auth{}, nonce_count0, signature_handler{"HMAC-SHA1"=>#<Method: HTTPClient::OAuth#sign_hmac_sha1}, #<HTTPClient::NegotiateAuth:0x00000004479448 @_mutex=#<Mutex:0x000000044793d0>, scheme"Negotiate", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::NegotiateAuth:0x00000004479308 @_mutex=#<Mutex:0x000000044792b8>, scheme"NTLM", challenge{}, auth{}, auth_defaultnil, ntlm_opt{:ntlmv2=>true}, #<HTTPClient::SSPINegotiateAuth:0x00000004479218 @_mutex=#<Mutex:0x000000044791a0>, scheme"Negotiate", challenge{}, #<HTTPClient::DigestAuth:0x00000004479538 @_mutex=#<Mutex:0x000000044794c0>, scheme"Digest", challenge{}, auth{}, nonce_count0, #<HTTPClient::BasicAuth:0x00000004479628 @_mutex=#<Mutex:0x000000044795b0>, scheme"Basic", challenge{}, crednil, auth{}, force_authnil]], debug_devnil, redirect_uri_callback#<Method: HTTPClient#default_redirect_uri_callback, @test_loopback_response=[], @session_manager=#<HTTPClient::SessionManager:0x00000004478a48 @client=#<HTTPClient:0x00000004479718 ...>, proxynil, agent_name"HTTPClient/1.0", fromnil, protocol_versionnil, debug_devnil, socket_synctrue, tcp_keepalivefalse, chunk_size16384, connect_timeout60, connect_retry1, send_timeout120, receive_timeout60, keep_alive_timeout15, read_block_size16384, protocol_retry_count5, ssl_config#<HTTPClient::SSLConfig:0x00000004478908 @client=#<HTTPClient:0x00000004479718 ...>, cert_store#<OpenSSL::X509::Store:0x000000044788e0 @verify_callback=nil, @error=nil, @error_string=nil, @chain=nil, @time=nil, @_httpclient_cert_store_items=[:default]>, cert_store_crl_items[], client_canil, client_key_passnil, client_keynil, client_certnil, verify_mode3, verify_depthnil, verify_callbacknil, destnil, timeoutnil, ssl_version:auto, options-2097019905, ciphers"ALL:!aNULL:!eNULL:!SSLv2", cacerts_loadedfalse, test_loopback_http_response[], transparent_gzip_decompressionfalse, strict_response_size_checkfalse, socket_local#<HTTPClient::Site:0x223c4fc tcp://0.0.0.0:0, @sess_pool={}, @sess_pool_mutex=#<Mutex:0x00000004478958>, sess_pool_last_checked2017-03-03 14:05:09 0700, ssl_config#<HTTPClient::SSLConfig:0x00000004478908 @client=#<HTTPClient:0x00000004479718 ...>, cert_store#<OpenSSL::X509::Store:0x000000044788e0 @verify_callback=nil, @error=nil, @error_string=nil, @chain=nil, @time=nil, @_httpclient_cert_store_items=[:default]>, cert_store_crl_items[], client_canil, client_key_passnil, client_keynil, client_certnil, verify_mode3, verify_depthnil, verify_callbacknil, destnil, timeoutnil, ssl_version:auto, options-2097019905, ciphers"ALL:!aNULL:!eNULL:!SSLv2", cacerts_loadedfalse, cookie_manager#<HTTPClient::CookieManager:0x000000044786b0 @cookies_file=nil, @format=HTTPClient::WebAgentSaver, @jar=#<HTTP::CookieJar:0x00000004478688 @store=#<HTTP::CookieJar::HashStore:0x000000044bac40 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000044babf0>, loggernil, gc_threshold150, jar{}, gc_index0, follow_redirect_count10
request.set_auth("https://api.github.com/users/rendrap", "rendrap", "c187359115")
# ==> {}
json = request.get_content("https://api.github.com/users/rendrap")
# ==> "{"login":"rendrap","id":16490171,"avatar_url":"https://avatars2.githubusercontent.com/u/16490171?v=3","gravatar_id":"","url":"https://api.github.com/users/rendrap","html_url":"https://github.com/rendrap","followers_url":"https://api.github.com/users/rendrap/followers","following_url":"https://api.github.com/users/rendrap/following{/other_user}","gists_url":"https://api.github.com/users/rendrap/gists{/gist_id}","starred_url":"https://api.github.com/users/rendrap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rendrap/subscriptions","organizations_url":"https://api.github.com/users/rendrap/orgs","repos_url":"https://api.github.com/users/rendrap/repos","events_url":"https://api.github.com/users/rendrap/events{/privacy}","received_events_url":"https://api.github.com/users/rendrap/received_events","type":"User","site_admin":false,"name":null,"company":null,"blog":null,"location":null,"email":null,"hireable":null,"bio":null,"public_repos":0,"public_gists":0,"followers":0,"following":2,"created_at":"2015-12-30T14:25:25Z","updated_at":"2017-02-25T11:21:20Z"}"

users = JSON.parse(json)
# ==> {"login"=>"rendrap", "id"=>16490171, "avatar_url"=>"https://avatars2.githubusercontent.com/u/16490171?v=3", "gravatar_id"=>"", "url"=>"https://api.github.com/users/rendrap", "html_url"=>"https://github.com/rendrap", "followers_url"=>"https://api.github.com/users/rendrap/followers", "following_url"=>"https://api.github.com/users/rendrap/following{/other_user}", "gists_url"=>"https://api.github.com/users/rendrap/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/rendrap/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/rendrap/subscriptions", "organizations_url"=>"https://api.github.com/users/rendrap/orgs", "repos_url"=>"https://api.github.com/users/rendrap/repos", "events_url"=>"https://api.github.com/users/rendrap/events{/privacy}", "received_events_url"=>"https://api.github.com/users/rendrap/received_events", "type"=>"User", "site_admin"=>false, "name"=>nil, "company"=>nil, "blog"=>nil, "location"=>nil, "email"=>nil, "hireable"=>nil, "bio"=>nil, "public_repos"=>0, "public_gists"=>0, "followers"=>0, "following"=>2, "created_at"=>"2015-12-30T14:25:25Z", "updated_at"=>"2017-02-25T11:21:20Z"}
ap users
# ={
# =                  "login" => "rendrap",
# =                     "id" => 16490171,
# =             "avatar_url" => "https://avatars2.githubusercontent.com/u/16490171?v=3",
# =            "gravatar_id" => "",
# =                    "url" => "https://api.github.com/users/rendrap",
# =               "html_url" => "https://github.com/rendrap",
# =          "followers_url" => "https://api.github.com/users/rendrap/followers",
# =          "following_url" => "https://api.github.com/users/rendrap/following{/other_user}",
# =              "gists_url" => "https://api.github.com/users/rendrap/gists{/gist_id}",
# =            "starred_url" => "https://api.github.com/users/rendrap/starred{/owner}{/repo}",
# =      "subscriptions_url" => "https://api.github.com/users/rendrap/subscriptions",
# =      "organizations_url" => "https://api.github.com/users/rendrap/orgs",
# =              "repos_url" => "https://api.github.com/users/rendrap/repos",
# =             "events_url" => "https://api.github.com/users/rendrap/events{/privacy}",
# =    "received_events_url" => "https://api.github.com/users/rendrap/received_events",
# =                   "type" => "User",
# =             "site_admin" => false,
# =                   "name" => nil,
# =                "company" => nil,
# =                   "blog" => nil,
# =               "location" => nil,
# =                  "email" => nil,
# =               "hireable" => nil,
# =                    "bio" => nil,
# =           "public_repos" => 0,
# =           "public_gists" => 0,
# =              "followers" => 0,
# =              "following" => 2,
# =             "created_at" => "2015-12-30T14:25:25Z",
# =             "updated_at" => "2017-02-25T11:21:20Z"
# =}
# ==> nil
p users
# ={"login"=>"rendrap", "id"=>16490171, "avatar_url"=>"https://avatars2.githubusercontent.com/u/16490171?v=3", "gravatar_id"=>"", "url"=>"https://api.github.com/users/rendrap", "html_url"=>"https://github.com/rendrap", "followers_url"=>"https://api.github.com/users/rendrap/followers", "following_url"=>"https://api.github.com/users/rendrap/following{/other_user}", "gists_url"=>"https://api.github.com/users/rendrap/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/rendrap/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/rendrap/subscriptions", "organizations_url"=>"https://api.github.com/users/rendrap/orgs", "repos_url"=>"https://api.github.com/users/rendrap/repos", "events_url"=>"https://api.github.com/users/rendrap/events{/privacy}", "received_events_url"=>"https://api.github.com/users/rendrap/received_events", "type"=>"User", "site_admin"=>false, "name"=>nil, "company"=>nil, "blog"=>nil, "location"=>nil, "email"=>nil, "hireable"=>nil, "bio"=>nil, "public_repos"=>0, "public_gists"=>0, "followers"=>0, "following"=>2, "created_at"=>"2015-12-30T14:25:25Z", "updated_at"=>"2017-02-25T11:21:20Z"}
# ==> {"login"=>"rendrap", "id"=>16490171, "avatar_url"=>"https://avatars2.githubusercontent.com/u/16490171?v=3", "gravatar_id"=>"", "url"=>"https://api.github.com/users/rendrap", "html_url"=>"https://github.com/rendrap", "followers_url"=>"https://api.github.com/users/rendrap/followers", "following_url"=>"https://api.github.com/users/rendrap/following{/other_user}", "gists_url"=>"https://api.github.com/users/rendrap/gists{/gist_id}", "starred_url"=>"https://api.github.com/users/rendrap/starred{/owner}{/repo}", "subscriptions_url"=>"https://api.github.com/users/rendrap/subscriptions", "organizations_url"=>"https://api.github.com/users/rendrap/orgs", "repos_url"=>"https://api.github.com/users/rendrap/repos", "events_url"=>"https://api.github.com/users/rendrap/events{/privacy}", "received_events_url"=>"https://api.github.com/users/rendrap/received_events", "type"=>"User", "site_admin"=>false, "name"=>nil, "company"=>nil, "blog"=>nil, "location"=>nil, "email"=>nil, "hireable"=>nil, "bio"=>nil, "public_repos"=>0, "public_gists"=>0, "followers"=>0, "following"=>2, "created_at"=>"2015-12-30T14:25:25Z", "updated_at"=>"2017-02-25T11:21:20Z"}

# json = open("https://api.github.com/users/rendrap")
# json = open("--user rendrap:c187359115 https://api.github.com/users/rendrap")
# users = JSON.parse(request)

# puts "#{request}"
# JSON.parse(request).read
